# Love Matcher API Documentation

## Overview
Love Matcher is a public matchmaking API that helps adults find meaningful relationships. The API provides endpoints for profile management, matching, messaging, and user statistics.

Base URL: `https://api.love-matcher.com`

## Authentication
All API requests require authentication using a Bearer token in the Authorization header:

```
Authorization: Bearer <token>
```

## Endpoints

### Health Check
```http
GET /ping
```
Verify API health and get basic metrics.

**Response**
```json
{
  "status": "ok",
  "metrics": {
    "total_users": 1234,
    "total_matches": 567,
    "active_now": 89
  }
}
```

### Profile Management

#### Create Profile
```http
POST /api/profiles
```

**Request Body**
```json
{
  "name": "John Doe",
  "age": 30,
  "preferences": {
    "max_age_difference": 5,
    "interests": ["hiking", "reading", "travel"],
    "location": "New York",
    "relationship_goal": "long-term",
    "education_level": "bachelors"
  }
}
```

**Response**
```json
{
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "active"
}
```

#### Get Profile
```http
GET /api/profiles/<user_id>
```

**Response**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "John Doe",
  "age": 30,
  "preferences": {
    "max_age_difference": 5,
    "interests": ["hiking", "reading", "travel"],
    "location": "New York",
    "relationship_goal": "long-term",
    "education_level": "bachelors"
  }
}
```

#### Update Profile
```http
PUT /api/profiles/<user_id>
```

**Request Body**
```json
{
  "preferences": {
    "max_age_difference": 7,
    "interests": ["hiking", "travel", "photography"]
  }
}
```

**Response**
```json
{
  "message": "Profile updated successfully"
}
```

### Matching

#### Get Matches
```http
GET /api/matches/<user_id>
```

**Response**
```json
{
  "matches": [
    {
      "user_id": "550e8400-e29b-41d4-a716-446655440001",
      "score": 85,
      "profile": {
        "name": "Jane Smith",
        "age": 28,
        "bio": "Love hiking and photography",
        "interests": ["hiking", "photography", "travel"]
      }
    }
  ]
}
```

#### Respond to Match
```http
POST /api/matches/<user_id>/outcome
```

**Request Body**
```json
{
  "match_id": "550e8400-e29b-41d4-a716-446655440002",
  "outcome": "accepted"  // or "declined"
}
```

**Response**
```json
{
  "message": "Match outcome recorded successfully"
}
```

### Messaging

#### Send Message
```http
POST /api/messages
```

**Request Body**
```json
{
  "from": "550e8400-e29b-41d4-a716-446655440000",
  "to": "550e8400-e29b-41d4-a716-446655440001",
  "content": "Hi, I noticed we both enjoy hiking!"
}
```

**Response**
```json
{
  "message": "Message sent successfully"
}
```

#### Get Messages
```http
GET /api/messages/<user_id>?other_user_id=<other_id>
```

**Response**
```json
[
  {
    "id": "550e8400-e29b-41d4-a716-446655440003",
    "from_user_id": "550e8400-e29b-41d4-a716-446655440000",
    "to_user_id": "550e8400-e29b-41d4-a716-446655440001",
    "content": "Hi, I noticed we both enjoy hiking!",
    "timestamp": "2024-03-15T14:30:00Z"
  }
]
```

### Statistics

#### Get User Stats
```http
GET /api/users/<user_id>/stats
```

**Response**
```json
{
  "profile_completeness": 85,
  "active_since": "2024-02-01T00:00:00Z",
  "total_matches": 12,
  "response_rate": 75
}
```

## Error Handling

The API uses conventional HTTP response codes:
- 200: Success
- 201: Created
- 400: Bad Request
- 401: Unauthorized
- 404: Not Found
- 500: Server Error

Error responses include a message:
```json
{
  "error": "User not found"
}
```

## Rate Limiting

API calls are limited to:
- 100 requests per minute for general endpoints
- 300 requests per minute for message endpoints

Rate limit headers are included in responses:
```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1615910400
```

## Testing

Test environment is available at `https://api-test.love-matcher.com`

Include test header for development:
```
X-Test-Channel: true
```

## Versioning

Current API version: v1
Include version in Accept header:
```
Accept: application/vnd.love-matcher.v1+json
```

## Support

For API support:
- Email: api@love-matcher.com
- Documentation: https://docs.love-matcher.com
- Status page: https://status.love-matcher.com
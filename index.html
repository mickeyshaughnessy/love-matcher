<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoveDashMatcher - Find Your Perfect Match</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            background: white;
            border-radius: 15px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.4);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .tagline {
            font-size: 1.1rem;
            opacity: 0.95;
        }
        
        .content {
            padding: 40px;
        }
        
        .description {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            border-left: 4px solid #764ba2;
            line-height: 1.8;
            color: #333;
        }
        
        .auth-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .auth-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .auth-box h2 {
            color: #764ba2;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #495057;
            font-weight: 500;
        }
        
        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 1rem;
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .chat-section {
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            overflow: hidden;
            display: none;
        }
        
        .chat-section.active {
            display: block;
        }
        
        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-header h3 {
            margin: 0;
        }
        
        .logout-btn {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            width: auto;
        }
        
        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: white;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            max-width: 80%;
        }
        
        .message.user {
            background: #667eea;
            color: white;
            margin-left: auto;
        }
        
        .message.ai {
            background: #e9ecef;
            color: #333;
        }
        
        .chat-input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
        }
        
        .chat-input-area input {
            flex: 1;
        }
        
        .chat-input-area button {
            width: auto;
            padding: 12px 30px;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            border: 1px solid #f5c6cb;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            border: 1px solid #c3e6cb;
        }
        
        @media (max-width: 768px) {
            .auth-section {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ”· LoveDashMatcher</h1>
            <p class="tagline">AI-Powered Matchmaking for Lasting Relationships</p>
        </header>
        
        <div class="content">
            <div class="description">
                <strong>Welcome to LoveDashMatcher!</strong> We're revolutionizing online matchmaking with advanced AI technology that analyzes 29 dimensions of compatibility to help you find your perfect partner. Our service supports traditional heterosexual relationships focused on marriage and family. Through conversational AI, we learn about your values, goals, and preferences to connect you with someone truly compatible for a lasting relationship.
            </div>
            
            <div id="authSection" class="auth-section">
                <div class="auth-box">
                    <h2>Sign Up</h2>
                    <form id="signupForm">
                        <div class="form-group">
                            <label for="signupEmail">Email Address</label>
                            <input type="email" id="signupEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="signupPassword">Password</label>
                            <input type="password" id="signupPassword" required>
                        </div>
                        <div class="form-group">
                            <label for="signupAge">Age</label>
                            <input type="number" id="signupAge" min="18" required>
                        </div>
                        <button type="submit">Create Account</button>
                    </form>
                    <div id="signupMessage"></div>
                </div>
                
                <div class="auth-box">
                    <h2>Login</h2>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginEmail">Email Address</label>
                            <input type="email" id="loginEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" required>
                        </div>
                        <button type="submit">Login</button>
                    </form>
                    <div id="loginMessage"></div>
                </div>
            </div>
            
            <div id="chatSection" class="chat-section">
                <div class="chat-header">
                    <h3>ðŸ’¬ Chat with Love Matcher</h3>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message ai">
                        Hi! I'm your AI matchmaker. I'm here to help you find your perfect partner by understanding what matters most to you. Tell me about yourself and what you're looking for in a relationship!
                    </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chatInput" placeholder="Type your message...">
                    <button onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'https://rse-api.com:5009';
        let authToken = null;

        // Signup
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const age = document.getElementById('signupAge').value;
            
            try {
                const response = await fetch(`${API_URL}/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password, age })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    authToken = data.token;
                    document.getElementById('signupMessage').innerHTML = 
                        `<div class="success">Account created successfully! Welcome!</div>`;
                    showChat();
                } else {
                    document.getElementById('signupMessage').innerHTML = 
                        `<div class="error">${data.error}</div>`;
                }
            } catch (error) {
                document.getElementById('signupMessage').innerHTML = 
                    `<div class="error">Connection error. Please try again.</div>`;
            }
        });

        // Login
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            
            try {
                const response = await fetch(`${API_URL}/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    authToken = data.token;
                    document.getElementById('loginMessage').innerHTML = 
                        `<div class="success">Login successful!</div>`;
                    showChat();
                } else {
                    document.getElementById('loginMessage').innerHTML = 
                        `<div class="error">${data.error}</div>`;
                }
            } catch (error) {
                document.getElementById('loginMessage').innerHTML = 
                    `<div class="error">Connection error. Please try again.</div>`;
            }
        });

        // Show chat interface
        function showChat() {
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('chatSection').classList.add('active');
        }

        // Send message
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message to chat
            addMessage(message, 'user');
            input.value = '';
            
            try {
                const response = await fetch(`${API_URL}/chat`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({ message })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    addMessage(data.response, 'ai');
                } else {
                    addMessage('Sorry, there was an error processing your message.', 'ai');
                }
            } catch (error) {
                addMessage('Connection error. Please try again.', 'ai');
            }
        }

        // Add message to chat
        function addMessage(text, type) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.textContent = text;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        // Logout
        function logout() {
            authToken = null;
            document.getElementById('authSection').style.display = 'grid';
            document.getElementById('chatSection').classList.remove('active');
            document.getElementById('chatMessages').innerHTML = `
                <div class="message ai">
                    Hi! I'm your AI matchmaker. I'm here to help you find your perfect partner by understanding what matters most to you. Tell me about yourself and what you're looking for in a relationship!
                </div>
            `;
        }

        // Enter key to send message
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
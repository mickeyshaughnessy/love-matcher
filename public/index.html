<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Matcher - AI-Powered Relationship Matching</title>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="./js/payment.js"></script>
    <style>
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .gradient-bg {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100">
    <div class="min-h-screen">
        <!-- Hero Section -->
        <div class="gradient-bg py-20">
            <div class="container mx-auto px-6">
                <div class="flex flex-col lg:flex-row items-center">
                    <div class="lg:w-1/2">
                        <h1 class="text-4xl lg:text-6xl font-bold mb-8">
                            Find Your Perfect Match with Transparent AI
                        </h1>
                        <p class="text-xl mb-8">
                            Love Matcher uses an open-source algorithm you can inspect and trust. One thoughtful match at a time, based on real compatibility metrics.
                        </p>
                        <div class="absolute top-4 right-4">
                            <a href="./monitor" class="group flex items-center opacity-30 hover:opacity-100 transition-all duration-300">
                                <div class="w-6 h-6 mr-2">
                                    <svg class="animate-pulse text-pink-500" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                    </svg>
                                </div>
                                <span class="text-sm font-mono text-pink-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300">monitor</span>
                            </a>
                        </div>
                        <div class="bg-white/10 backdrop-blur-lg rounded-lg p-6 mb-8 text-center">
                            <h2 class="text-2xl font-bold mb-4">Lifetime Membership</h2>
                            <p class="text-lg mb-4">One-time payment of $150</p>
                            <div class="flex justify-center space-x-4">
                                <button id="signup-button" 
                                        class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                                    Get Started Now
                                </button>
                                <button id="login-button"
                                        class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300 flex items-center">
                                    <svg class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                                    </svg>
                                    Login
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="lg:w-1/2 mt-10 lg:mt-0">
                        <img src="./images/viz1.png" alt="AI Matching Visualization" class="rounded-lg shadow-2xl">
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="py-20 bg-gray-800">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-12">How It Works</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                    <div class="text-center">
                        <div class="bg-indigo-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-4">Transparent AI Matching</h3>
                        <p>Our GitHub-hosted algorithm is fully transparent. Track every factor in your matches and understand why you're connected.</p>
                    </div>
                    <div class="text-center">
                        <div class="bg-indigo-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-4">Secure Messaging</h3>
                        <p>Connect safely with potential matches through our encrypted platform.</p>
                    </div>
                    <div class="text-center">
                        <div class="bg-indigo-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-4">Instant Access</h3>
                        <p>Start matching immediately after signup with our growing community.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Terms Section -->
        <div class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-12">Terms & Conditions</h2>
                <div class="bg-gray-800 rounded-lg p-6 max-h-96 overflow-y-auto">
                    <div class="prose prose-invert max-w-none">
                        <h3 class="text-xl font-bold mb-4">Our Commitment to Transparency</h3>
                        
                        <h4 class="text-lg font-semibold mb-2">One Match at a Time</h4>
                        <p class="mb-4">Unlike swipe-based apps that encourage shallow connections, we present just one carefully selected match at a time. This allows you to focus on building genuine connections without the distraction of endless options.</p>
                        
                        <h4 class="text-lg font-semibold mb-2">Open Source Algorithm</h4>
                        <p class="mb-4">Our <a href="https://github.com/mickeyshaughnessy/love-matcher" class="text-indigo-400 hover:text-indigo-300">algorithm</a> is open source where you can review exactly how matches are made. No black boxes, no hidden biases - just transparent, scientifically-backed compatibility metrics:</p>
                        <ul class="list-disc pl-6 mb-6">
                            <li>Core values alignment (40%)</li>
                            <li>Life goals compatibility (30%)</li>
                            <li>Interest overlap (20%)</li>
                            <li>Age compatibility (10%)</li>
                        </ul>

                        <h4 class="text-lg font-semibold mb-2">Lifetime Partnership Model</h4>
                        <p class="mb-4">Our one-time payment model aligns our incentives with your success. Unlike monthly subscriptions that profit from keeping you single, we're invested in helping you find a lasting partnership.</p>
                        <p class="mb-4">When you succeed in finding marriage, we succeed. This drives us to focus on meaningful matches rather than endless scrolling and superficial connections.</p>

                        <h3 class="text-xl font-bold mb-4">Membership Terms</h3>
                        <ul class="list-disc pl-6 mb-6">
                            <li>One-time payment of $150 for lifetime access</li>
                            <li>No recurring fees or hidden charges</li>
                            <li>Access to all current and future features</li>
                            <li>Ability to pause or reactivate account anytime</li>
                        </ul>

                        <h3 class="text-xl font-bold mb-4">Privacy & Security</h3>
                        <ul class="list-disc pl-6 mb-6">
                            <li>No data sharing with third parties</li>
                            <li>Option to delete account and data anytime</li>
                        </ul>

                        <h3 class="text-xl font-bold mb-4">Code of Conduct</h3>
                        <ul class="list-disc pl-6 mb-6">
                            <li>Respect for all users</li>
                            <li>Zero tolerance for harassment</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sign Up Modal -->
    <div id="signup-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-gray-800 p-8 rounded-lg max-w-md w-full relative">
            <button id="close-signup" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <h2 class="text-2xl font-bold mb-6">Create Your Account</h2>
            <form id="signup-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Email</label>
                    <input type="email" id="signup-email" required
                           class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Password</label>
                    <input type="password" id="signup-password" required
                           class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Age</label>
                    <input type="number" id="signup-age" required min="18"
                           class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-indigo-500">
                </div>
                <div id="signup-error" class="hidden text-red-500 text-sm"></div>
                <button type="submit"
                        class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                    Create Account
                </button>
            </form>
            <div id="payment-container" class="hidden mt-6">
                <p class="text-center mb-4">Account created! Now complete your payment.</p>
                <button id="submit-payment" 
                        class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                    Pay $150 and Start Matching
                </button>
                <div id="payment-error" class="hidden text-red-500 text-sm mt-2"></div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-gray-800 p-8 rounded-lg max-w-md w-full relative">
            <button id="close-login" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <h2 class="text-2xl font-bold mb-6">Welcome Back</h2>
            <form id="login-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Email</label>
                    <input type="email" id="login-email" required
                           class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-indigo-500">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Password</label>
                    <input type="password" id="login-password" required
                           class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-indigo-500">
                </div>
                <div id="login-error" class="hidden text-red-500 text-sm"></div>
                <button type="submit"
                        class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                    Login
                </button>
            </form>
        </div>
    </div>
    <script type="module">
        import { handlePayment } from './js/payment.js';
        
        const API_BASE = 'https://rse-api.com:5009';
        let currentUser = null;
        
        // Show signup modal
        document.getElementById('signup-button').addEventListener('click', () => {
            document.getElementById('signup-modal').classList.remove('hidden');
        });

        // Show login modal
        document.getElementById('login-button').addEventListener('click', () => {
            document.getElementById('login-modal').classList.remove('hidden');
        });

        // Close modals
        document.getElementById('close-signup').addEventListener('click', () => {
            document.getElementById('signup-modal').classList.add('hidden');
        });

        document.getElementById('close-login').addEventListener('click', () => {
            document.getElementById('login-modal').classList.add('hidden');
        });

        // Close modals when clicking outside
        document.querySelectorAll('#signup-modal, #login-modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === e.currentTarget) {
                    e.target.classList.add('hidden');
                }
            });
        });

        // Handle signup
        document.getElementById('signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const age = document.getElementById('signup-age').value;
            const errorDiv = document.getElementById('signup-error');
            const submitBtn = e.target.querySelector('button[type="submit"]');
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Creating account...';
            errorDiv.classList.add('hidden');
            
            try {
                const response = await fetch(`${API_BASE}/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, password, age: parseInt(age) })
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Registration failed');
                }
                
                // Save token and user info
                localStorage.setItem('token', data.token);
                localStorage.setItem('user_id', data.user_id);
                currentUser = { email, token: data.token };
                
                // Hide signup form and show payment
                document.getElementById('signup-form').classList.add('hidden');
                document.getElementById('payment-container').classList.remove('hidden');
                
            } catch (error) {
                errorDiv.textContent = error.message;
                errorDiv.classList.remove('hidden');
                submitBtn.disabled = false;
                submitBtn.textContent = 'Create Account';
            }
        });

        // Handle login
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const errorDiv = document.getElementById('login-error');
            const submitBtn = e.target.querySelector('button[type="submit"]');
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Logging in...';
            errorDiv.classList.add('hidden');
            
            try {
                const response = await fetch(`${API_BASE}/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.error || 'Login failed');
                }
                
                // Save token and redirect to app
                localStorage.setItem('token', data.token);
                localStorage.setItem('user_id', data.user_id);
                
                // Redirect to main app (you'll need to create this page)
                window.location.href = '/app.html';
                
            } catch (error) {
                errorDiv.textContent = error.message;
                errorDiv.classList.remove('hidden');
                submitBtn.disabled = false;
                submitBtn.textContent = 'Login';
            }
        });

        // Handle payment submission
        document.getElementById('submit-payment').addEventListener('click', async () => {
            if (currentUser) {
                await handlePayment(currentUser);
            }
        });
    </script>
</body>
</html>
